(this.webpackJsonpsketchbook=this.webpackJsonpsketchbook||[]).push([[0],{134:function(e,t,n){},140:function(e,t,n){},143:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},312:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(29),a=n.n(r),i=(n(134),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))}),o=n(15),l=n(9),d=n(30),u=n(7),j="http://localhost:8088",h="users",b="app_user_id",f=(n(86),n(16)),m=n(1),O=function(){var e=Object(c.useState)({email:""}),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(u.a)(r,2),i=a[0],O=a[1],g=Object(l.f)();return Object(m.jsxs)("main",{className:"container--login",children:[Object(m.jsxs)("dialog",{className:"dialog dialog--auth",open:i,children:[Object(m.jsx)("div",{children:"User does not exist"}),Object(m.jsx)("button",{className:"button--close",onClick:function(e){return O(!1)},children:"Close"})]}),Object(m.jsx)("section",{children:Object(m.jsxs)("form",{className:"form--login",onSubmit:function(e){e.preventDefault(),fetch("".concat(j,"/").concat(h,"?email=").concat(n.email)).then((function(e){return e.json()})).then((function(e){return!!e.length&&e[0]})).then((function(e){e?(sessionStorage.setItem(b,e.id),g.push("/")):O(!0)}))},children:[Object(m.jsx)("h1",{children:"Sketchbook"}),Object(m.jsx)("h2",{children:"Please sign in"}),Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("label",{htmlFor:"inputEmail",children:" Email address "}),Object(m.jsx)("input",{type:"email",id:"email",className:"form-control",placeholder:"Email address",required:!0,autoFocus:!0,value:n.email,onChange:function(e){var t=Object(d.a)({},n);t[e.target.id]=e.target.value,s(t)}})]}),Object(m.jsx)("fieldset",{children:Object(m.jsx)(f.a,{type:"submit",children:"Sign in"})})]})}),Object(m.jsx)("section",{className:"link--register",children:Object(m.jsx)(o.b,{to:"/register",children:"Register for an account"})})]})},g=function(){var e=Object(c.useState)({firstName:"",lastName:"",email:""}),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(u.a)(r,2),i=a[0],o=a[1],f=Object(l.f)(),O=function(e){var t=Object(d.a)({},n);t[e.target.id]=e.target.value,s(t)};return Object(m.jsxs)("main",{style:{textAlign:"center"},children:[Object(m.jsxs)("dialog",{className:"dialog dialog--password",open:i,children:[Object(m.jsx)("div",{children:"Account with that email address already exists"}),Object(m.jsx)("button",{className:"button--close",onClick:function(e){return o(!1)},children:"Close"})]}),Object(m.jsxs)("form",{className:"form--login",onSubmit:function(e){e.preventDefault(),fetch("".concat(j,"/").concat(h,"?email=").concat(n.email)).then((function(e){return e.json()})).then((function(e){return!!e.length})).then((function(e){e?o(!0):fetch("".concat(j,"/").concat(h),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,name:"".concat(n.firstName," ").concat(n.lastName)})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("id")&&(sessionStorage.setItem(b,e.id),f.push("/"))}))}))},children:[Object(m.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Register for Application Name"}),Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("label",{htmlFor:"firstName",children:" First Name "}),Object(m.jsx)("input",{type:"text",name:"firstName",id:"firstName",className:"form-control",placeholder:"First name",required:!0,autoFocus:!0,value:n.firstName,onChange:O})]}),Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("label",{htmlFor:"lastName",children:" Last Name "}),Object(m.jsx)("input",{type:"text",name:"lastName",id:"lastName",className:"form-control",placeholder:"Last name",required:!0,value:n.lastName,onChange:O})]}),Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("label",{htmlFor:"inputEmail",children:" Email address "}),Object(m.jsx)("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Email address",required:!0,value:n.email,onChange:O})]}),Object(m.jsx)("fieldset",{children:Object(m.jsx)("button",{type:"submit",children:" Sign in "})})]})]})},x=(n(140),n(141),function(e){return Object(m.jsxs)("nav",{className:"navbar flex-md-nowrap p-0 shadow",children:[Object(m.jsxs)("ul",{className:"nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/sketchform",children:"SketchPad"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/sketchbook",children:"SketchBook"})})]}),Object(m.jsx)("ul",{className:"nav nav-logout",children:Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(o.b,{className:"nav-link",onClick:function(e){return sessionStorage.clear()},to:"/login",children:"Logout"})})})]})}),p=Object(c.createContext)(),k=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(0),i=Object(u.a)(a,2),o=i[0],l=i[1],d=Object(c.useState)("#000000"),j=Object(u.a)(d,2),h=j[0],b=j[1];return Object(m.jsx)(p.Provider,{value:{grids:s,getGrids:function(){return fetch("http://localhost:8088/grids").then((function(e){return e.json()})).then(r)},saveGrid:function(e){return fetch("http://localhost:8088/grids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},gridInput:o,setGridInput:l,deleteGrid:function(e){return fetch("http://localhost:8088/grids/".concat(e),{method:"DELETE"})},color:h,setColor:b},children:e.children})},v=n(127),N=n(20),C=n.n(N),S=n(34),I=(n(143),Object(c.createContext)()),y=function(e){var t=Object(c.useContext)(p),n=t.saveGrid,s=t.deleteGrid,r=Object(c.useState)([]),a=Object(u.a)(r,2),i=a[0],o=a[1],l=function(e){return new Promise((function(t){return setTimeout(t,e)}))},d=function(){return fetch("http://localhost:8088/sketches?_embed=grids").then((function(e){return e.json()})).then(o)};return Object(m.jsx)(I.Provider,{value:{sketches:i,getSketches:d,saveSketch:function(e){var t={name:e.name,userId:e.userId,size:e.size};return fetch("http://localhost:8088/sketches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.grid.reduce((function(e,c){return e.then(Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({sketchId:t.id,blockId:c.blockId,blockColor:c.blockColor}),e.next=3,l(100);case 3:case"end":return e.stop()}}),e)}))))}),Promise.resolve())}))},updateSketch:function(e){e.erasedBlocks.reduce((function(e,t){return e.then(Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(t),e.next=3,l(100);case 3:case"end":return e.stop()}}),e)}))))}),Promise.resolve());var t={id:e.id,name:e.name,userId:e.userId,size:e.size};return fetch("http://localhost:8088/sketches/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then(Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(100*e.erasedBlocks.length);case 2:e.grid.reduce((function(t,c){return t.then(Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({sketchId:e.id,blockId:c.blockId,blockColor:c.blockColor}),t.next=3,l(100);case 3:case"end":return t.stop()}}),t)}))))}),Promise.resolve());case 3:case"end":return t.stop()}}),t)}))))},getSketchById:function(e){return fetch("http://localhost:8088/sketches/".concat(e,"?_embed=grids")).then((function(e){return e.json()}))},deleteSketch:function(e){return fetch("http://localhost:8088/sketches/".concat(e),{method:"DELETE"}).then(d)}},children:e.children})},_=n(129),w=n(46),E=n(125),F=function(e){var t=Object(c.useContext)(I),n=t.saveSketch,s=t.getSketchById,r=t.updateSketch,a=Object(c.useContext)(p),i=a.getGrids,o=a.color,j=a.setColor,h=parseInt(sessionStorage.app_user_id),b=Object(l.g)().sketchId,O=Object(l.f)(),g=Object(c.useState)(!0),x=Object(u.a)(g,2),k=x[0],N=x[1],y=Object(c.useState)(0),F=Object(u.a)(y,2),B=F[0],z=F[1],T=Object(c.useState)(!1),D=Object(u.a)(T,2),P=D[0],G=D[1],L=Object(c.useState)(!1),A=Object(u.a)(L,2),J=A[0],q=A[1],R=Object(c.useState)(!0),H=Object(u.a)(R,2),M=H[0],U=H[1],V=Object(c.useState)([]),K=Object(u.a)(V,2),Q=K[0],W=K[1],X=Object(c.useState)([]),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],ce=te[1],se=Object(c.useState)({name:"",size:parseInt(e.size),userId:h,grid:[]}),re=Object(u.a)(se,2),ae=re[0],ie=re[1],oe={gridTemplateColumns:"repeat(".concat(ae.size,", 1fr)"),gridTemplateRows:"repeat(".concat(ae.size,", 1fr)"),height:"75vh",width:"75vh"},le=function(e){return new Promise((function(t){return setTimeout(t,e)}))},de=function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===ae.grid.length&&0===Z.length){e.next=10;break}G(!0),t=0;case 3:if(!(t<=ae.grid.length+Z.length)){e.next=10;break}return z(100/(ae.grid.length+Z.length)*t),e.next=7,le(100);case 7:t++,e.next=3;break;case 10:O.push("/sketchbook");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(e){e.target.className.includes("selected")||U(!0!==M)},je=function(e){e.dataTransfer.setDragImage(new Image,0,0)},he=function(e){var t=e.target,n=t.id.split("--"),c=Object(u.a)(n,2),s=(c[0],c[1]),r=ae.grid.find((function(e){return e.blockId===parseInt(s)})),a=Q.find((function(e){return e.blockId===parseInt(s)})),i=Z.find((function(e){return e.blockId===parseInt(s)}));if(!0===M){if(t.style.backgroundColor=o,void 0===r)ae.grid.push({blockId:parseInt(s),blockColor:o});else if(void 0!==r){var l=Object(d.a)({},ae);l.grid=l.grid.filter((function(e){return e.blockId!==parseInt(s)})),l.grid.push({blockId:parseInt(s),blockColor:o}),ie(l)}if(void 0!==a)if(a.blockColor===o){var j=Object(d.a)({},ae);j.grid=j.grid.filter((function(e){return e.blockId!==parseInt(s)})),ie(j)}else void 0===i&&Z.push({blockId:parseInt(s),blockColor:a.blockColor,id:a.id});void 0!==i&&i.blockColor===o&&$(Object(v.a)(Z).filter((function(e){return e.blockId!==parseInt(s)})))}else if(!1===M&&(t.style.backgroundColor="#ffffff",void 0===i&&void 0!==a&&Z.push({blockId:parseInt(s),blockColor:a.blockColor,id:a.id}),void 0!==r)){var h=Object(d.a)({},ae),b=ae.grid.filter((function(e){return e.blockId!==parseInt(s)}));h.grid=b,ie(h)}};return Object(c.useEffect)((function(){N(!0),i().then((function(){b?s(b).then((function(e){var t={id:e.id,name:e.name,size:e.size,userId:e.userId,grid:[]};W(e.grids),ie(t),N(!1)})):N(!1)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"sketchpadContainer",children:[Object(m.jsx)("input",{type:"text",id:"name",className:"sketch__input",autoComplete:"off",defaultValue:ae.name,placeholder:b?ae.name:"New Sketch Name",onChange:function(e){return ae.name=e.target.value}}),Object(m.jsx)(w.a,{show:J,size:"lg",onHide:function(){return q(!1)},animation:!1,centered:!0,children:Object(m.jsx)(w.a.Header,{closeButton:!0,children:"Name your sketch before saving!"})}),Object(m.jsx)("div",{className:"container",style:oe,children:function(e){for(var t=[],n=function(e){if(void 0!==Q.find((function(t){return t.blockId===e}))){var n=Q.find((function(t){return t.blockId===e}));t.push(Object(m.jsx)("div",{className:"grid",style:{backgroundColor:n.blockColor},id:"grid--".concat(e),draggable:"true",onDragStart:je,onDragOver:he},e))}else t.push(Object(m.jsx)("div",{className:"grid",id:"grid--".concat(e),draggable:"true",onDragStart:je,onDragOver:he},e))},c=1;c<=e*e;c++)n(c);return t}(ae.size)}),Object(m.jsx)(f.a,{className:"grid__newSketch",onClick:function(e){O.push("/sketchform")},children:"New Sketch"}),Object(m.jsx)(f.a,{className:"grid__save",disabled:k,onClick:function(e){if(""===ae.name)q(!0);else if(N(!0),b){var t=Z.map((function(e){return e.id}));r({id:ae.id,name:ae.name,size:ae.size,userId:ae.userId,grid:ae.grid,erasedBlocks:t}).then(de())}else{var c={name:ae.name,size:ae.size,userId:h,grid:ae.grid};n(c).then(de())}},children:"Save Sketch"}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"btn__settings",children:[Object(m.jsx)("div",{className:"settings__pencil",children:Object(m.jsx)(f.a,{className:M?"grid__mode selected":"grid__mode",onClick:ue,children:"Pencil"})}),Object(m.jsx)("div",{className:"settings__eraser",children:Object(m.jsx)(f.a,{className:M?"grid__mode":"grid__mode selected",onClick:ue,children:"Eraser"})}),Object(m.jsxs)("div",{className:"settings__color",children:[Object(m.jsx)(f.a,{className:"grid__color",onClick:function(e){ce(!ne)},children:"Color"}),ne?Object(m.jsx)(E.GithubPicker,{colors:["#000000","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB","#964B00"],onChangeComplete:function(e,t){j(e.hex),ce(!ne),U(!0)},triangle:"hide"}):null]})]})})]}),Object(m.jsx)(w.a,{animation:!1,show:P,size:"lg",centered:!0,children:Object(m.jsx)(w.a.Body,{children:Object(m.jsx)(_.a,{animated:!0,now:B,label:"Saving: ".concat(Math.round(B),"%")})})})]})},B=function(){var e=Object(c.useContext)(p).gridInput;return Object(m.jsx)("div",{className:"sketch",children:Object(m.jsx)(F,{size:e})})},z=n(62),T=function(e){var t=Object(c.useContext)(I).deleteSketch,n=Object(l.f)(),s={gridTemplateColumns:"repeat(".concat(e.sketch.size,", 1fr)"),gridTemplateRows:"repeat(".concat(e.sketch.size,", 1fr)"),height:"20vh",width:"20vh"};return Object(m.jsx)("section",{className:"sketchCard",children:Object(m.jsx)(z.a,{className:"sketchCard__card",children:Object(m.jsxs)(z.a.Body,{children:[Object(m.jsx)(z.a.Title,{children:e.sketch.name}),Object(m.jsx)("div",{className:"previewContainer",style:s,children:function(t){for(var n=[],c=e.sketch.grids,s=function(e){if(void 0!==c.find((function(t){return t.blockId===e}))){var t=c.find((function(t){return t.blockId===e}));n.push(Object(m.jsx)("div",{className:"grid",style:{backgroundColor:t.blockColor},id:"grid--".concat(e)},e))}else n.push(Object(m.jsx)("div",{className:"grid",id:"grid--".concat(e)},e))},r=1;r<=t*t;r++)s(r);return n}(e.sketch.size)}),Object(m.jsx)(f.a,{className:"btn-edit",onClick:function(){n.push("/sketch/edit/".concat(e.sketch.id))},children:"Edit Sketch"}),Object(m.jsx)(f.a,{className:"btn-delete",id:"btn--".concat(e.sketch.id),onClick:function(e){var n=e.target.id.split("--"),c=Object(u.a)(n,2),s=(c[0],c[1]);t(parseInt(s))},children:"Delete Sketch"})]})})})},D=(n(308),function(){var e=Object(c.useContext)(I),t=e.sketches,n=e.getSketches,s=parseInt(sessionStorage.app_user_id);return Object(c.useEffect)((function(){n()}),[]),Object(m.jsx)("div",{className:"sketches",children:t.filter((function(e){return e.userId===s})).map((function(e){return Object(m.jsx)(T,{sketch:e},e.id)}))})}),P=n(45),G=n(128),L=n(126),A=(n(309),function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],r=Object(c.useContext)(p),a=r.gridInput,i=r.setGridInput,o=Object(l.f)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"formContainer",children:[Object(m.jsx)("div",{className:"logo",children:"SketchBook"}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"text-center col-sm-6 offset-sm-3",children:Object(m.jsxs)(P.a,{children:[Object(m.jsx)(P.a.Prepend,{children:Object(m.jsx)(P.a.Text,{className:"form_label",children:"SketchPad Size: "})}),Object(m.jsx)(G.a,{type:"number",className:"form_input","aria-label":"Grid Size","aria-describedby":"basic-addon1",placeholder:"Number between 1-10",onChange:function(e){i(e.target.value)},autoFocus:!0}),Object(m.jsx)(P.a.Append,{children:Object(m.jsx)(f.a,{className:"form_btn",onClick:function(e){parseInt(a)<=10&&parseInt(a)>0?o.push("/sketchpad"):s(!0)},children:"Start Sketch"})})]})})}),Object(m.jsx)(L.a,{variant:"danger",className:"col-sm-4 offset-sm-4",show:n,onClose:function(){return s(!1)},transition:!1,dismissible:!0,children:"That's not a usable number!"})]})})}),J=function(){return Object(m.jsx)(k,{children:Object(m.jsxs)(y,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/sketchpad",children:Object(m.jsx)(B,{})}),Object(m.jsx)(l.b,{exact:!0,path:"/sketchform",children:Object(m.jsx)(A,{})}),Object(m.jsx)(l.b,{exact:!0,path:"/sketchbook",children:Object(m.jsx)(D,{})}),Object(m.jsx)(l.b,{exact:!0,path:"/sketch/edit/:sketchId(\\d+)",children:Object(m.jsx)(B,{})})]})})};n(312);var q=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b,{render:function(){return sessionStorage.getItem(b)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{}),Object(m.jsx)(J,{}),Object(m.jsx)(l.a,{to:"/sketchform"})]}):Object(m.jsx)(l.a,{to:"/login"})}}),Object(m.jsx)(l.b,{path:"/login",children:Object(m.jsx)(O,{})}),Object(m.jsx)(l.b,{path:"/register",children:Object(m.jsx)(g,{})})]})};a.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(q,{})})}),document.getElementById("root")),i()},86:function(e,t,n){}},[[313,1,2]]]);
//# sourceMappingURL=main.7069c8a4.chunk.js.map